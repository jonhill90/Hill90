# Global variables for all hosts

# User configuration
deploy_user: deploy
deploy_user_groups:
  - docker
  - wheel
deploy_home: /home/deploy
app_directory: /opt/hill90

# Docker configuration
docker_edition: ce
docker_version: latest
docker_compose_version: v2.24.0

# SSH hardening
ssh_port: 22
ssh_permit_root_login: no
ssh_password_authentication: no
ssh_max_auth_tries: 3
ssh_client_alive_interval: 300
ssh_client_alive_count_max: 2

# Firewall configuration
# SSH access ONLY via Tailscale network (100.64.0.0/10) - not publicly exposed
firewall_allowed_ports:
  - 80/tcp    # HTTP
  - 443/tcp   # HTTPS

# SOPS/age configuration
age_key_path: "{{ app_directory }}/secrets/keys"
age_key_source: "{{ playbook_dir }}/../../secrets/keys/age-prod.key"
sops_version: 3.8.1
age_version: 1.1.1

# Application settings
app_name: hill90
domain: hill90.com
acme_email: jonhill90@live.com

# Let's Encrypt configuration
# IMPORTANT: Use staging for testing to avoid rate limits (50/week for production)
# Set to 'production' only when ready for real certificates
letsencrypt_env: production  # 'staging' or 'production'

# Traefik admin password - stored in encrypted secrets
# Generate with: htpasswd -nb admin yourpassword
# Update with: make secrets-update KEY=TRAEFIK_ADMIN_PASSWORD_HASH VALUE='$apr1$...'
